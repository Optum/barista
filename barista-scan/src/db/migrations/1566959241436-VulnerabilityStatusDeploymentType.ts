// tslint:disable:max-line-length
import { MigrationInterface, QueryRunner } from 'typeorm';

export class VulnerabilityStatusDeploymentType1566959241436 implements MigrationInterface {
  public async down(queryRunner: QueryRunner): Promise<any> {
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" DROP CONSTRAINT "FK_8d5f17b2488e0748d1282823672"`,
    );
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" DROP CONSTRAINT "FK_a886916413b6628714b160e7c53"`,
    );
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" DROP CONSTRAINT "FK_789bf40c735fafd3c7fc66c9a96"`,
    );
    await queryRunner.query(`DROP TABLE "vulnerability_status_deployment_type"`);
  }

  public async up(queryRunner: QueryRunner): Promise<any> {
    await queryRunner.query(
      `CREATE TABLE "vulnerability_status_deployment_type" ("created_at" TIMESTAMP NOT NULL DEFAULT now(), "id" SERIAL NOT NULL, "updated_at" TIMESTAMP DEFAULT now(), "deployment_type_code" character varying(64), "project_scan_status_type_code" character varying(64), "security_status_code" character varying(64), CONSTRAINT "PK_01d358651551029b4c11cbd4081" PRIMARY KEY ("id"))`,
    );
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" ADD CONSTRAINT "FK_789bf40c735fafd3c7fc66c9a96" FOREIGN KEY ("deployment_type_code") REFERENCES "deployment_type"("code") ON DELETE NO ACTION ON UPDATE NO ACTION`,
    );
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" ADD CONSTRAINT "FK_a886916413b6628714b160e7c53" FOREIGN KEY ("project_scan_status_type_code") REFERENCES "project_scan_status_type"("code") ON DELETE NO ACTION ON UPDATE NO ACTION`,
    );
    await queryRunner.query(
      `ALTER TABLE "vulnerability_status_deployment_type" ADD CONSTRAINT "FK_8d5f17b2488e0748d1282823672" FOREIGN KEY ("security_status_code") REFERENCES "security_scan_result_item_status_type"("code") ON DELETE NO ACTION ON UPDATE NO ACTION`,
    );
  }
}
